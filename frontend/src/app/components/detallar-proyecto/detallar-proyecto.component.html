<div class="container mt-4">
  <h2 class="mb-3">Proyectos</h2>

  <!-- Botón Añadir -->
  <button class="btn btn-success mb-3" (click)="addProject()">
    <i class="bi bi-plus-lg me-1"></i> Añadir
  </button>

  <!-- Formulario de nuevo proyecto -->
  <div *ngIf="showForm" class="card card-body mb-3">
    <form (ngSubmit)="saveProject()">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Nombre Proyecto</label>
          <input [(ngModel)]="newProject.nombre" name="nombre" class="form-control" required />
        </div>
        <div class="col-md-6">
          <label class="form-label">Descripción</label>
          <input [(ngModel)]="newProject.descripcion" name="descripcion" class="form-control" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Inicio</label>
          <input [(ngModel)]="newProject.inicio" name="inicio" type="date" class="form-control" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Empresas</label>
          <input [(ngModel)]="newProject.empresas" name="empresas" class="form-control" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Estado</label>
          <input [(ngModel)]="newProject.estado" name="estado" class="form-control" />
        </div>
        <div class="col-md-12">
          <label class="form-label">Dirección</label>
          <input [(ngModel)]="newProject.direccion" name="direccion" class="form-control" />
        </div>
      </div>
      <div class="mt-3">
        <button type="submit" class="btn btn-primary me-2">Guardar</button>
        <button type="button" class="btn btn-secondary" (click)="cancel()">Cancelar</button>
      </div>
    </form>
  </div>

  <!-- Tabla de proyectos -->
  <div class="table-responsive">
    <table class="table align-middle">
      <thead class="table-light">
        <tr>
          <th scope="col">Nombre Proyecto</th>
          <th scope="col">Descripción</th>
          <th scope="col">Inicio</th>
          <th scope="col">Empresas</th>
          <th scope="col">Estado</th>
          <th scope="col">Dirección</th>
          <th scope="col" class="text-end">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of projects; let i = index">
          <td>{{ p.nombre }}</td>
          <td>{{ p.descripcion }}</td>
          <td>{{ p.inicio }}</td>
          <td><i class="bi bi-building fs-5 text-secondary"></i> {{ p.empresas }}</td>
          <td>{{ p.estado }}</td>
          <td>{{ p.direccion }}</td>
          <td class="text-end">
            <div class="dropdown">
              <button class="btn btn-sm btn-light" type="button" data-bs-toggle="dropdown">
                <i class="bi bi-three-dots-vertical"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="#">Editar</a></li>
                <li><a class="dropdown-item text-danger" href="#">Eliminar</a></li>
              </ul>
            </div>
          </td>
        </tr>
        <tr *ngIf="projects.length === 0">
          <td colspan="7" class="text-center text-muted">No hay proyectos registrados</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
